!function(a,b,c){function q(a){a={type:a.type||"GET",url:a.url||"",timeout:a.timeout||5e3,onComplete:a.onComplete||function(){},onError:a.onError||function(){},onSuccess:a.onSuccess||function(){},data:a.data||""};var b=new XMLHttpRequest,c=!1;b.open(a.type,a.url,!0),setTimeout(function(){c=!0},a.timeout),b.onreadystatechange=function(){4!=b.readyState||c||(r(b)?a.onSuccess(s(b,a.type)):a.onError(),a.onComplete(),b=null)},b.send()}function r(a){try{return!a.status&&"file:"==location.protocol||a.status>=200&&a.status<300||304==a.status||navigator.userAgent.indexOf("Safari")>=0&&"undefined"==typeof a.status}catch(a){}return!1}function s(b,c){var d=b.getResponseHeader("content-type"),e=!c&&d&&d.indexOf("xml")>=0;return e="xml"==c||e?b.responseXML:b.responseText,"script"==c&&eval.call(a,e),e}function t(){return{width:a.innerWidth,height:a.innerHeight}}function v(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function x(a,b){var d=a.length,e=0;if("number"==typeof b.length)for(var f=b.length;e<f;e++)a[d++]=b[e];else for(;b[e]!==c;)a[d++]=b[e++];return a.length=d,a}function y(){setTimeout(function(){a.scrollTo(0,1)},0)}var j,m,n,o,d=b,e=d.body,g=function(){var a=navigator.userAgent;return!!(a.match(/iPhone/i)||a.match(/iPod/i)||a.match(/iPad/i))}(),h=t();m={NAME:"Snoopy",VERSION:"0.3",START_OFFSET:{top:"0",left:"0"}},j={elem:null,modules_html:"",raw_source:"",gen_source:"",bind_stack:[],position:m.START_OFFSET,init:function(){var b=this.elem=$("<div />");b.attr("id","snpy").addClass("cleanslate"),g&&b.addClass("MobileSafari"),b.style("top",this.position.top,!0),b.style("left",this.position.left,!0),320!=h.width&&480!=h.width||(e.scrollTop=0,y()),this.runTests(),this.getRawSource(),this.getGeneratedSource(),b.html(tim(n.snoopy,{name:m.NAME,modules:this.modules_html,version:m.VERSION,generated_source:this.gen_source})),$(e).append(b),this.setMaxDimensions(),this.bindEvents()},runTests:function(){var b,a=p.run();for(group in a){var c=0;b="<h2>"+a[group].description+'</h2><ul class="tests">';for(test in a[group].results){var d=a[group].results[test];b+='<li class="'+(d?"positive":"negative")+'">',b+='<span class="test_for">'+test+"</span>",b+='<span class="test_result '+(d===!0?"true_no_detail":(!!d).toString())+'">'+(d===!0?"-":d.toString())+"</span></li>",d&&c++}b+="</ul>",this.modules_html+='<div class="module'+(c?"":" empty")+" type_"+group+" output_"+a[group].return_type+'">'+b+"</div>"}},getRawSource:function(){var a=this;q({type:"GET",url:location.href,onSuccess:function(b){a.raw_source=floodlight(floodlight.decode(b)),$("#snpy_rawsource code.html").html(a.raw_source)}})},getGeneratedSource:function(){this.gen_source=floodlight(floodlight.decode(d.documentElement.innerHTML.toString()))},bindEvents:function(b){var c=this,d=this.elem;$("#snpy .close").bind("click",function(){return d.addClass("closed"),!1}),$(a).bind("resize",function(){c.setMaxDimensions()});var e=$("#snpy .menu li"),f=$("#snpy .panel");e.each(function(){$(this).bind("click",function(a){var b=$(this);return e.removeClass("active"),f.removeClass("active"),b.addClass("active"),$($(a.target).attr("href")).addClass("active"),!1})});for(var g,h=-1;g=this.bind_stack[++h];)g()},setMaxDimensions:function(){h=t(),g&&this.elem.style("max-width",h.width-2*parseInt(m.START_OFFSET.left)+"px",!0),320!=h.width&&480!=h.width?$("#snpy pre.source").style("max-height",h.height-180-2*parseInt(m.START_OFFSET.top)+"px",!0):320==h.width?$("#snpy pre.source").style("height","300px",!0):480==h.width&&$("#snpy pre.source").style("height","150px",!0)}},n={snoopy:'<div class="head">    <a class="close" href="#">close</a>    <h1>{{name}}</h1></div><div class="body">    <ul class="menu tabs">        <li class="active"><a href="#snpy_overview">overview</a></li>        <li><a href="#snpy_rawsource">view source</a></li>        <li><a href="#snpy_gensource"><span class="no320">view</span> generated source</a></li>    </ul>    <div class="panels">        <div id="snpy_overview" class="panel active">{{modules}}</div>        <div id="snpy_rawsource" class="panel"><p class="tip MobileSafari">Tip: Use a two fingered drag to scroll the code.</p>        <pre class="source raw"><code class="html">loading source code...</code></pre></div>        <div id="snpy_gensource" class="panel"><p class="tip MobileSafari">Tip: Use a two fingered drag to scroll the code.</p><pre class="source generated"><code class="html">{{generated_source}}</code></pre></div>    </div></div><div class="footer">    <p><a href="https://github.com/allmarkedup/Snoopy">Snoopy <span class="version">v{{version}}</span></a>. Created by <a href="http://allmarkedup.com/">Mark Perkins</a>.</p></div>'};var p=function(a,b,c){function o(a,b){var c=a.match(b);return!!c&&(!c[1]||""==c[1]||c[1])}var d={},e={},g={},h={},i={},j=b.getElementsByTagName("script"),k=b.getElementsByTagName("meta"),l=b.documentElement.outerHTML||b.documentElement.innerHTML,m=b.doctype;k=function(){for(var a,b=[],c=-1;a=k[++c];)a.name&&a.content&&b.push(a);return b}(),j=function(){for(var a,b=[],c=-1;a=j[++c];)a.src&&b.push(j);return b}(),e.pageinfo={description:"Page information",return_type:"detail",tests:{Doctype:[{type:"doctype",test:{HTML5:{name:"html",publicId:""},"HTML 4.01 Strict":{name:"html",publicId:"-//W3C//DTD HTML 4.01//EN"},"HTML 4.01 Transitional":{name:"html",publicId:"-//W3C//DTD HTML 4.01 Transitional//EN"},"XHTML 1.0 Strict":{name:"html",publicId:"-//W3C//DTD XHTML 1.0 Strict//EN"},"XHTML 1.0 Transitional":{name:"html",publicId:"-//W3C//DTD XHTML 1.0 Transitional//EN"},"XHTML 1.0 Frameset":{name:"html",publicId:"-//W3C//DTD XHTML 1.0 Frameset//EN"},"XHTML 1.1":{name:"html",publicId:"-//W3C//DTD XHTML 1.1//EN"},"HTML 2.0":{name:"html",publicId:"-//IETF//DTD HTML 2.0//EN"},"HTML 3.0":{name:"html",publicId:"-//W3C//DTD HTML 3.2 Final//EN"},"XHTML 1.0 Basic":{name:"html",publicId:"-//W3C//DTD XHTML Basic 1.0//EN"}}}],Charset:[{type:"custom",test:function(){return b.characterSet||"None detected"}}]}},e.js_libs={description:"JavaScript Libraries",return_type:"version",tests:{jQuery:[{type:"custom",test:function(){return!!a.jQuery&&a.jQuery.fn.jquery}}],"jQuery UI":[{type:"custom",test:function(){return!(!a.jQuery||!a.jQuery.ui)&&a.jQuery.ui.version}}],Prototype:[{type:"custom",test:function(){return!!a.Prototype&&a.Prototype.Version}}],Scriptaculous:[{type:"custom",test:function(){return!!a.Scriptaculous&&a.Scriptaculous.Version}}],MooTools:[{type:"custom",test:function(){return!!a.MooTools&&a.MooTools.version}}],Glow:[{type:"custom",test:function(){return!!a.glow&&a.glow.VERSION}}],Dojo:[{type:"custom",test:function(){return!!a.dojo&&a.dojo.version.toString()}}],ExtJS:[{type:"custom",test:function(){return!!a.Ext&&a.Ext.version}}],YUI2:[{type:"custom",test:function(){return!!a.YAHOO&&a.YAHOO.VERSION}}],YUI3:[{type:"custom",test:function(){return!!a.YUI&&a.YUI.version}}],"Google Closure":[{type:"custom",test:function(){return!!a.goog}}],Modernizr:[{type:"custom",test:function(){return!!a.Modernizr&&a.Modernizr._version}}],Raphael:[{type:"custom",test:function(){return!!a.Raphael&&a.Raphael.version}}]}},e.cms={description:"Content Management System",return_type:"version",tests:{Wordpress:[{type:"meta",test:{name:"generator",match:/WordPress\s?([\w\d\.\-_]*)/i}},{type:"text",test:/<link rel=["|']stylesheet["|'] [^>]+wp-content/i}],Tumblr:[{type:"custom",test:function(){return!!a.Tumblr}}],Squarespace:[{type:"custom",test:function(){return!!a.Squarespace}}],Typepad:[{type:"meta",test:{name:"generator",match:/typepad\.com/i}}],Joomla:[{type:"meta",test:{name:"generator",match:/joomla\!?\s?([\d.]*)/i}}],Blogger:[{type:"meta",test:{name:"generator",match:/blogger/i}}],MovableType:[{type:"meta",test:{name:"generator",match:/Movable Type Pro ([\d.]*)/i}}],Drupal:[{type:"custom",test:function(){return!!a.Drupal}}],Jekyll:[{type:"meta",test:{name:"generator",match:/Jekyll v([\w\d\.]*)/i}}],Octopress:[{type:"meta",test:{name:"generator",match:/.*Octopress.*/i}}],"Cisco Eos":[{type:"custom",test:function(){return!!a.eos}},{type:"text",test:/<link rel=["|']stylesheet["|'] [^>]+ciscoeos.com/i}]}},e.analytics={description:"Analytics",return_type:"version",tests:{"Google Analytics":[{type:"custom",test:function(){return!!(a._gat||a._gaq||a.ga)}}],Reinvigorate:[{type:"custom",test:function(){return!!a.reinvigorate}}],Piwik:[{type:"custom",test:function(){return!!a._paq}}],Clicky:[{type:"custom",test:function(){return!!a.clicky}}],"Open Web Analytics":[{type:"custom",test:function(){return!!a.OWA}}],"New Relic":[{type:"custom",test:function(){return!!a.NREUMQ}}],Gauges:[{type:"custom",test:function(){return!!a._gauges}}],"WordPress Stats":[{type:"custom",test:function(){return!(!a._tkq&&!a._stq)}}],Mint:[{type:"custom",test:function(){return!!a.Mint}}]}},e.fonts={description:"Fonts",return_type:"version",tests:{Cufon:[{type:"custom",test:function(){return!!a.Cufon}}],Typekit:[{type:"custom",test:function(){return!!a.Typekit}}],Fontdeck:[{type:"text",test:/<link rel=["|']stylesheet["|'] [^>]+f.fontdeck.com/i}],"Google Webfonts":[{type:"custom",test:function(){return!!a.WebFont}},{type:"text",test:/<link rel=["|']stylesheet["|'] [^>]+fonts.googleapis.com/i}],sIFR:[{type:"custom",test:function(){return!!a.sIFR&&a.sIFR.VERSION}}]}},g.custom=function(a){return a()},g.text=function(a){return o(l,a)},m?g.doctype=function(a){for(subtest in a)if(a.hasOwnProperty(subtest)){var b=a[subtest];if(m.name.toLowerCase()==b.name&&m.publicId==b.publicId)return subtest}return!1}:g.doctype=function(){return"None detected"},j.length?g.script=function(a){for(var b,c=-1;b=j[++c];)return o(b.src,a);return!1}:g.script=function(){return!1},k.length?g.meta=function(a){for(var b,c=-1;b=k[++c];)if(b.name==a.name){var d=o(b.content,a.match);if(d)return d}return!1}:g.meta=function(){return!1};var p=function(a){for(var b,c=-1;b=a[++c];){var d=g[b.type](b.test);if(d!==!1)return d}return!1},r=function(a){for(group in e)if(e.hasOwnProperty(group))for(test in e[group].tests)if(e[group].tests.hasOwnProperty(test)&&a(group,test)===!1)return},s=function(a,b,c){h[a]=h[a]||{},h[a].results=h[a].results||{},h[a].description=e[a].description,h[a].return_type=e[a].return_type,h[a].results[b]=c,i[b.toLowerCase()]=c};return d.results=function(){return h},d.check=function(a){return a=a.toLowerCase(),i[a]!=c?i[a]:(r(function(b,c){if(c.toLowerCase()===a)return s(b,c,p(e[b].tests[c])),!1}),i[a])},d.run=function(){return r(function(a,b){s(a,b,p(e[a].tests[b]))}),d.results()},d}(a,b);!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=b():"function"==typeof c.define&&c.define.amd?define(b):c[a]=b()}("tim",function(){var a=function(){"use strict";var e,a="{{",b="}}",c="[a-z0-9_$][\\.a-z0-9_]*",d=new RegExp(a+"\\s*("+c+")\\s*"+b,"gi");return function(a,b){return a.replace(d,function(a,c){for(var d=c.split("."),f=d.length,g=b,h=0;h<f;h++){if(g=g[d[h]],g===e)throw"tim: '"+d[h]+"' not found in "+a;if(h===f-1)return g}})}}();return a},this),function(a,b){function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a,b){return a.replace(e.regex[b],function(a){return e.map[b][a]})}function h(a){for(var b=a.split(""),c=[],e=b.length,f=0;f<e;f+=1)b[f].charCodeAt(0)>127?c.push(b[f]):c.push(String.fromCharCode(b[f].charCodeAt(0)+10240));return c=c.join(""),d[c]=a,c}function i(a){return d[a]||""}function j(a,b){return"Â«"+h(b)+"Â·"+h(a)+"Â·"+h(b)+"Â»"}function k(a){return a.replace(/\u00ab(.+?)\u00b7(.+?)\u00b7\1\u00bb/g,function(a,b,c){return c=c.replace(/\u00ab[^\u00b7]+\u00b7/g,"").replace(/\u00b7[^\u00bb]+\u00bb/g,""),l(i(c),i(b))})}function l(a,b){return'<span class="'+e.prefix+b+'">'+g(a,"encode")+"</span>"}function m(a,b,d){var g,h,e=0;for(a=f(a)?a:[a],g=a.length;e<g;e+=1)h=c[a[e]],h&&(b=b.replace(h.regex,h.callback));return d===!1?b:k(b)}function n(a,b,d){c[a]={regex:b,callback:d}}var c={},d={},e={prefix:"",spaces:"  ",regex:{encode:/<|>|"|&/g,decode:/&(?:lt|gt|quot|amp);/g},map:{encode:{"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"},decode:{"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&"}}};a.floodlight=function(b){return a.floodlight.html(b)},a.floodlight.options=e,a.floodlight.encode=function(a){return g(a,"encode")},a.floodlight.decode=function(a){return g(a,"decode")},n("whitespace",/\t/g,function(){return e.spaces}),a.floodlight.javascript=function(b){return m(a.floodlight.javascript.filters,b)},function(){var b;this.keywords="var function if else for while break switch case do new null in with void continue delete return this true false throw catch typeof with instanceof".split(" "),this.special="eval window document undefined NaN Infinity parseInt parseFloat encodeURI decodeURI encodeURIComponent decodeURIComponent".split(" "),this.regex={comment:/(\/\/[^\n]*|\/\*(?:[^*\n]|\*+[^\/*])*\*+\/)/g,string:/("(?:(?!")[^\\\n]|\\.)*"|'(?:(?!')[^\\\n]|\\.)*')/g,regexp:/(\/.+\/[mgi]*)(?!\s*\w)/g,class:/\b([A-Z][a-zA-Z]+)\b/g,number:/\b([0-9]+(?:\.[0-9]+)?)\b/g,keyword:new RegExp("\\b("+a.floodlight.javascript.keywords.join("|")+")\\b","g"),special:new RegExp("\\b("+a.floodlight.javascript.special.join("|")+")\\b","g")},this.filters=["whitespace"];for(b in this.regex)!function(a,b,c){var d="javascript."+b;n(d,a,function(a,c){return j(c,"javascript-"+b)}),c.push(d)}(a.floodlight.javascript.regex[b],b,this.filters)}.call(a.floodlight.javascript),a.floodlight.css=function(b){return m(a.floodlight.css.filters,b)},function(){var a="/[0-9a-f]{1,6}(?:\\r\\n|[ \\n\\r\\t\\f])?|[^\\n\\r\\f0-9a-f]/",b="[_a-z]|[^\\0-\\237]|(?:"+a+")",c="[_a-z0-9-]|[^\\0-\\237]|(?:"+a+")",d="[-]?(?:"+b+")(?:"+c+")*";this.regex={rule:new RegExp("@"+d,"g"),selector:new RegExp(d,"g"),string:new RegExp("(?:\"|')(?:[^\\n\\r\\f\\1]|\\n\\|\\r\\n|\\r|\\f|"+a+")*\\1","g"),number:/[0-9]+|[0-9]*\.[0-9]+/g,block:/\{([^\}]*)\}/g,declaration:new RegExp("("+d+")[^:]*:[\\s\\n]*([^;]*);","g"),comment:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g},this.filters=["css.comment","css.block"],n("css.block",this.regex.block,function(a,b){var c=m("css.declaration",b,!1);return a.replace(b,c)}),n("css.declaration",this.regex.declaration,function(a,b,c){console.log("%o",c);var d=m(["css.string","css.number"],c,!1);return d===c&&(d=j(c,"css-value")),a.replace(b,j(b,"css-property")).replace(c,d)}),n("css.string",this.regex.string,function(a){return console.log("'%o'",a),j(a,"css-string")}),n("css.number",this.regex.number,function(a){return j(a,"css-number")}),n("css.comment",this.regex.comment,function(a){return j(a,"css-comment")})}.call(a.floodlight.css),a.floodlight.html=function(b){return m(a.floodlight.html.filters,b)},function(){this.regex={tag:/(<\/?)(\w+)([^>]*)(\/?>)/g,attr:/(\w+)(?:\s*=\s*("[^"]*"|'[^']*'|[^>\s]+))?/g,comment:/<!--[^\-]*-->/g,entity:/&[^;]+;/g,script:/<script[^>]*>([^<]*)<\/script>/gi},this.filters=["whitespace","html.script","html.comment","html.tag","html.entity"],n("html.tag",this.regex.tag,function(a,b,c,d,e){var f=m("html.attr",d,!1);return j(b,"html-bracket")+j(c,"html-tag")+f+j(e,"html-bracket")}),n("html.attr",this.regex.attr,function(a,b,c){return j(b,"html-attribute")+(c?"="+j(c,"html-value"):"")}),n("html.comment",this.regex.comment,function(a){return j(a,"html-comment")}),n("html.entity",this.regex.entity,function(a){return j(a,"html-entity")}),n("html.script",this.regex.script,function(b,c){var d=m(a.floodlight.javascript.filters,c,!1);return b.replace(c,d)})}.call(a.floodlight.html)}(this),o=function(a){return new o.fn.init(a)},o.fn=o.prototype={length:0,selector:"",init:function(e){var f,h,g=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;return e?e.nodeType?(this[0]=e,this.length=1,this):e===a?(this[0]=e,this.length=1,this):(h=g.exec(e))?(e=[d.createElement(h[1])],x(this,e),this):/^#[\w+]$/.test(e)?(f=d.getElementById(e),f&&(this.length=1,this[0]=f),this.selector=e,this.context=b,this):/^\w+$/.test(e)?(this.selector=e,this.context=b,e=b.getElementsByTagName(e),x(this,e)):"string"==typeof e?(this.selector=e,this.context=b,e=b.querySelectorAll(e),x(this,e)):(e.selector!==c&&(this.selector=e.selector,this.context=e.context),x(e,this)):this},each:function(a){for(var b=0,c=this.length,d=this[0];b<c&&a.call(d,b,d)!==!1;d=this[++b]);},bind:function(a,b){for(var c=0,d=this.length;c<d;c++)this[c].addEventListener(a,function(a){b.call(this,a)===!1&&(a.preventDefault(),a.stopPropagation())},!1);return this},addClass:function(a){var b=(a||"").split(/\s/);return this.each(function(){for(var a=0,c=b.length;a<c;a++)o(this).hasClass(b[a])||(this.className+=this.className?" "+b[a]:b[a])}),this},removeClass:function(a){var b=(a||"").split(/\s/);return this.each(function(){for(var a=0,c=b.length;a<c;a++)this.className=v(this.className.replace(this.className.match(" "+b[a])?" "+b[a]:b[a],""))}),this},hasClass:function(a){return!!this[0]&&new RegExp("\\b"+a+"\\b").test(this[0].className)},attr:function(a,b){return b!==c?(this.each(function(){this.setAttribute(a,b)}),this):this[0]?this[0].getAttribute(a):null},html:function(a){return a!==c?(this.each(function(){this.innerHTML=a}),this):this[0]?this[0].innerHTML:null},append:function(a){if(a!==c)return a=a[0]?a[0]:a,this.each(function(){this.appendChild(a)}),this}},o.fn.init.prototype=o.fn,$=o,function(){function b(a,b){for(var c,d=-1;c=a[++d];)if(b===c.prop)return c.val;return null}function d(a,b,c,d){b=v(b);for(var e,f=-1;e=a[++f];)if(b===e.prop)return a[f].val=c,void(a[f].important=d);a.push({prop:b,val:c,important:d})}function e(a){for(var c,b="",d=-1;c=a[++d];)b+=c.prop+" : "+c.val,c.important&&(b+=" !important"),b+=";";return b}function f(b,c){if("string"==typeof c){var d=c.split(/;/);for(i=0,l=d.length;i<l;i++){var e=v(d[i]);if(""!==e){var f=e.match(a);b.push({prop:v(f[1]),val:v(f[2]),important:!!f[3]})}}}}var a=/([\w-]+)\s*:\s*([^;!]+)\s?(!\s?important?)?\s?[;|$]?/i;$.fn.style=function(a,g,h){if(g!==c)return h=h||!1,this.each(function(){var b=[],c=$(this);f(b,c.attr("style")),d(b,a,g,h),c.attr("style",e(b))});var i=$(this[0]),j=[];return f(j,i.attr("style")),b(j,a)}}(),j.init()}(window,document);